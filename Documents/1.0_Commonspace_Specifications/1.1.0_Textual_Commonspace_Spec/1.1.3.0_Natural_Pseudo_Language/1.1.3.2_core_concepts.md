# NPL 核心概念

> 基于： [[1.1.3.1_protocol_overview]]

本文件定义理解和使用 NPL 所需的核心概念，这些概念围绕着 **`Cognitor` 内部的“NPL 运行时” (NPL Runtime)** 环境展开。

## 1. NPL 运行时 (NPL Runtime)

* **定义**: 每个 `Cognitor` 内部存在一个概念性的 NPL 运行时环境。这是 `Cognitor` **解释和遵循 NPL 认知指令 (`CD`)** 的场所，包括处理基于编程隐喻的指令和执行**自然语言定义 (NLD)**。
* **功能**:
    * **处理 NPL `Sign`**: 按顺序或根据控制流处理 NPL `CD Sign`，包括调用 NLD 定义的过程或引用 NLD 定义的数据。
    * **状态维护**: 管理在 NPL 脚本执行期间创建的 `Datum` 句柄及其指向的 `Sign`。
    * **符号过程执行**: 在此环境中，`Cognitor` 根据 NPL `CD` 提供的 `Constraint`（包括 NLD 的 NL 指导和 NPL 接口约束）执行其内部符号过程 (`Semiosis`)。
    * **与 Space 交互**: 通过特定 `CD`（如 `canvas.render`, `NPL.RequestRuntimeInput`）指导 `Cognitor` 与外部 `Space` 进行交互。
* **CT 记录**: `Cognitor` 在 NPL 运行时中的活动（处理指令、状态变化、决策、**特别是 NLD 的解释与执行**）**必须**通过 `CT` 进行记录（参见 [[1.1.3.9_cognitive_trace_support]]）。

## 2. NPL `Sign` 作为认知指令 (`CD`)

* NPL 语句或 NLD 构造是结构化或半结构化的 `Sign`，其主要功能是作为 `CD`，指导 `Cognitor` 在其 NPL 运行时中的行为。

## 3. `Datum` 句柄: NPL 运行时的回指-共指机制

* **定义**: `Datum` 句柄（如 `my_var`）是 NPL 的一部分，作为 NPL **运行时内部**的**引用标签**。
* **作用**: 指向 NPL 运行时中当前存在的某个外显 `Sign`，再作为一个与该 `Sign` 等价的符号。

## 4. `origin` 与 `operator`: 运行时身份

* **`operator`**: (`CognitorRef`) 指向当前正在其 NPL 运行时中处理 NPL `CD` 的 `Cognitor`。
* **`origin`**: (`CognitorRef`) 指向最初**发出**当前正在被处理的 NPL `CD Sign` 的那个 `Cognitor`。

## 5. 跨运行时交互 (`NPL.ExecuteDirective`)

* 核心模式 `NPL.ExecuteDirective(instruction_sign: Datum, executor: CognitorRef)`（见 [[1.1.3.6_core_directives]]）定义了 `operator` 如何请求 `executor` 在其**自身的 NPL 运行时**中处理 `instruction_sign`。这构成了跨 `Cognitor` 委托的基础。

## 6. 库 (`Library`) 与导入 (`import`)

* NPL 支持通过**库（Library）** 的隐喻来组织功能。库是一组相关的 NPL 概念性类、函数（`CD` 模式）、常量，以及**NLD 定义**。见 [[1.1.3.8_library_protocol]] 。
* **`import` 指令 (`CD`)**: NPL 语法（见 [[1.1.3.3_syntax]]）允许使用 `import` 指令。
* **作用**: 该 `CD` 指导 `Cognitor` 在其 NPL 运行时的当前作用域中**加载或使其能够识别**指定库中定义的符号（包括 NLD 名称），以便后续 NPL 指令可以使用它们。
