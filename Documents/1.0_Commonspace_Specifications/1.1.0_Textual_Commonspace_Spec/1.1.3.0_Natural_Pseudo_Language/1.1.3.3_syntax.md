# NPL 内置语法

> 基于： [[1.1.3.1_protocol_overview]]

NPL 的内置语法定义了构建 NPL **符号 (`Sign`)** 的规则，这些 `Sign` 在 `Cognitor` 内部的 **NPL 运行时**中作为**认知指令 (`CD`)** 被处理，或者用于**定义可复用的认知过程或数据（NLD）**。语法结构利用编程隐喻或特定关键字提供 `Constraint`。

## 1. 句柄赋值 (`=`): 联系 Datum 与其它符号

* **语法**: `handle = expression`
* **意图**: 指导 `Cognitor` 在其 NPL 运行时中，评估 `expression`（可能涉及创建概念性对象、调用 `CD` 模式、调用 NLD 过程、引用 NLD 数据、或引用字面量 `Sign`），并将返回值与 `handle` 这个 `Datum` 建立关联。

## 2. 点 (`.`) 操作符: 应用运行时 CD 模式

* **语法**: `datum_handle.cd_pattern_name(...)`
* **意图**: 指导 `Cognitor` 将名为 `cd_pattern_name` 的 `CD` 模式应用于 `datum_handle` 在运行时指向的概念性对象或 `Sign`。

## 3. 函数/过程调用 (`(...)`): 调用 CD 模式或 NLD 过程

* **语法**: `function_or_nld_proc_handle(arg1, arg2, ...)`
* **意图**: 指导 `Cognitor` 执行由 `function_or_nld_proc_handle` 指向的 `CD` 模式或 NLD 过程定义。

## 4. 引用 (`Quote` 句柄): 指向历史 `Sign`

* **概念**: NPL 运行时中表示对 `Space` 中历史 `Sign` 的引用的特殊 `Datum` 句柄。
* **语法**: 通过特定 `CD` 模式（如 `cts[...]` 或 `Canvas.find_rendered_node(...)`）获得。参见 [[1.1.3.5_datum_and_references]]。

## 5. 注释 (`//`, `/**/` 等)

* **作用**: 作为 NPL `Sign` 的一部分，为 `Cognitor` 处理该 `CD` 时提供附加 `Constraint` 或解释。注释本身不直接触发运行时操作。

## 6. 自然语言嵌入 (作为字面量 `Sign`)

* **语法**: 通常用引号括起来，如 `"这是一段自然语言"`。
* **作用**: 创建一个包含自然语言文本的简单 `Sign`。`Cognitor` 需要运用其语言理解能力处理它。它可以被赋值给 `Datum` 句柄，或作为参数传递给 `CD` 模式或 NLD 定义。

## 7. 控制流结构: 指导运行时认知流程

* **核心概念**: 控制流结构 (`if`, `for`, `while`) 指导 `Cognitor` 在其 **NPL 运行时**中**模拟执行流程**。
* **`if`/`elif`/`else`**: 指导 `Cognitor` 在运行时评估条件 (`Datum` 指向的 `Object`)，并根据结果选择性地处理后续 `CD` 块（可包含 NLD 调用）。CT 记录评估和选择。
* **`for...in`**: 指导 `Cognitor` 在运行时模拟对 `iterable_datum` 指向的概念性集合（可能由 NLD 数据定义）的迭代。**对于每次迭代**，处理循环体内的 `CD`。**CT 记录每次迭代**。
* **`while`**: 指导 `Cognitor` 在运行时**重复模拟**：评估条件，若为真，则处理循环体 `CD`，直到条件为假。**CT 记录评估和循环**。

## 8. 库导入 (`import` )

* **语法 (类 Python)**: `import library_name`, `from library_name import symbol`, etc.
* **意图**: 指导 `Cognitor` 在其 NPL 运行时的当前作用域中**识别并使能**来自指定库的符号（概念性类、`CD` 模式、常量、NLD 定义等）。参见 [[1.1.3.8_library_protocol]]。

## 9. 自然语言定义 (NLD) 语法

* **目的**: 使用自然语言作为核心指导来定义可复用的认知过程或概念数据，并用 NPL 结构约束接口和输出。
* **命名 NLD 定义**:
    * **过程**: `nld proc name(params: TypeHints = defaults) -> ReturnTypeHint: """NL Body""" end_proc`
    * **数据/对象**: `nld data name(params: TypeHints = defaults) -> TargetStructureHint: """NL Body""" end_data`
* **匿名 NLD 定义**:
    * **过程**: `let handle = nldp (params: TypeHints) -> ReturnTypeHint : """NL Body""" ;`
    * **数据/对象**: `let handle = nldd TargetStructureHint : """NL Body""" ;`
* **核心**: NL Body 提供核心指导，`-> TypeHint` 强制输出结构，`Cognitor` 理解 NL 并执行，`CT` 详尽记录。详见 [[1.1.3.4_nld_mechanism]]。
