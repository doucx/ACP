# NPL Datum 句柄与引用类型

> 基于： [[1.1.5.1_protocol_overview]]

本文档描述 NPL 中用于引用的核心概念 `Datum` 句柄，以及几种特殊的引用类型。这些概念是 NPL 指令操作的基础。

**重要前提**: `Datum` 及其特殊类型（`Quote`, `CognitorRef`）是 NPL **语法层面**的概念，体现为 **`Datum` 句柄**（NPL 中的“变量名”），用于在 NPL 认知指令 (`CD`) 的 `Representamen` 中方便地引用其他 `Sign`、概念 (`Object`) 或 NLD 定义。对 `Datum` 句柄应用的点操作符（`.`）及其后的“方法名”构成了一种**结构化的认知指令模式 (`CD` Pattern)**。这些模式的认知过程**可以**通过**自然语言定义 (NLD)** 在核心库中实现。

## 1. `Datum` 句柄: NPL 中引用 `Sign`/`Object`/NLD 的通用机制

* **概念**: `Datum` 句柄（如 NPL 中的变量名 `my_variable`）是 NPL `Representamen` 的一部分，充当**占位符或标签**。它指向 `Cognitor` NPL 运行时内部追踪的某个目标，这个目标可以是具体的 `Sign`、抽象的概念 (`Object`)，或者是可调用的 **NLD 过程**或可实例化的 **NLD 数据/对象**定义。
* **目的**: 提供一种在 NPL 指令中一致地引用这些目标的方式。
* **创建与来源**: 通过 NPL 赋值指令 (`handle = source`) 建立关联。`source` 可以是字面量 `Sign`、另一个 `Datum` 句柄、调用返回 `Datum` 的 `CD` 模式或 NLD 过程的结果，或者是对 NLD 数据/对象定义的引用。

### 核心认知指令模式 (`CD` Patterns) (应用于 `Datum` 句柄)

对 `Datum` 句柄应用“方法”是在 NPL 中发出结构化的**认知指令 (`CD`)**。其底层的认知过程很可能由核心库中的 NLD 定义来驱动。

* **`a_datum_handle.explore_meaning(depth: Datum = ..., constraints: Datum = ...)`**:
    * **意图 (`Object`)**: 指导 `Cognitor` 对 `a_datum_handle` 指向的目标进行深入的**无限衍义 (Unlimited Semiosis)** 探索。
    * **CT 要求**: **必须**通过 `CT Sign` 记录探索过程。

* **`a_datum_handle.resolve(constraints: Datum = ...)`**:
    * **意图 (`Object`)**: 指导 `Cognitor` 尝试**降低** `a_datum_handle` 指向的目标的**不确定性**。
    * **返回值 (概念性)**: 返回指向“解析后”`Sign` 的 `Datum` 句柄。

* **`a_datum_handle.alternatives(num: Datum = 1, constraints: Datum = ...)`**:
    * **意图 (`Object`)**: 指导 `Cognitor` 从 `a_datum_handle` 指向的目标的多种潜在解释中，提取代表性 `Interpretant`。
    * **返回值 (概念性)**: 返回包含多个指向解读 `Sign` 的 `Datum` 句柄的列表 `Datum`。

* **`a_datum_handle.get_representamen_text()`**:
    * **意图 (`Object`)**: 指导 `Cognitor` 提供目标 `Sign` 的**外显再现体 (`Externalized Representamen`)** 的文本形式。

* **`a_datum_handle.apply_cd_pattern(pattern: Datum, ...)`**:
    * **意图 (`Object`)**: 指导 `Cognitor` 将 `pattern` (指向一个 NPL `CD` 模式或 NLD 过程定义的 `Datum`) 应用于 `a_datum_handle` 指向的目标。

* **`a_datum_handle.add_constraint(constraint: Datum)`**:
    * **意图 (`Object`)**: 指导 `Cognitor` 在后续处理 `a_datum_handle` 指向的目标时，显式地将 `constraint` `Datum` 指向的 `Sign` 作为一个额外的**约束 (`Constraint`)**。

## 2. `Quote` 句柄: 指向 `Space` 中特定历史 `Sign` 的 Datum

* **概念**: 一种**特殊类型的 `Datum` 句柄**，用于精确引用 `Space` 中的历史 `Sign`。
* **目的**: 避免信息冗余，确保对历史 `Sign` 的精确指代。
* **标识信息 (概念性)**: NPL `Representamen` 中表示 `Quote` 的部分需要包含足够信息（如 `origin` 和 `seq`，或 Canvas 中的 `node_id` 格式）让 `Cognitor` 能唯一地定位到被引用的历史 `Sign`。例如 NPL 语法 `cts["Gemini"][0]` 中的 `"Gemini"[0]` 部分。
* **处理方式**: `Cognitor` 解析 `Quote` 句柄，找到被引用的历史 `Sign`，然后在当前符号过程中使用该历史 `Sign` 作为操作对象或约束。

## 3. `CognitorRef` 句柄: 指向认知实体的 Datum

* **概念**: 一种**特殊类型的 `Datum` 句柄**，用于在 NPL `CD` 的 `Representamen` 中引用某个**认知实体 (`Cognitor`)**。
* **目的**: 明确认知活动的主体或对象（如 `chat` 的目标，`exec` 的执行者）。
* **标识信息**: 通常包含 `Cognitor` 的唯一名称或标识符 (其源头实体句柄)。
* **关联 CD 模式 (概念性)**:
    * **`a_cognitor_ref.get_info()`**: 指导 `Cognitor` 查询并返回目标 `Cognitor` 的 `CognitorInfo Sign` 的 `Datum` 句柄。