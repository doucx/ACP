#  内置库

### 1. SpaceLog：NPL 日志库

#### 简介

SpaceLog 是 NPL 中用于记录程序运行状态、调试信息和错误信息的日志库。它提供了一种简单而灵活的方式，可以根据日志等级来控制日志的记录和输出，从而方便开发者诊断和解决问题。

由于 Space 的特性，只有一个真正的输出流，即 Space 本身。因此，SpaceLog 的实现非常简化，无需额外的配置或设置。

#### 用法

SpaceLog 提供了以下几个函数，用于记录不同等级的日志信息：

-   **`SpaceLog.debug(message: Representamen)`**: 记录调试信息。
-   **`SpaceLog.info(message: Representamen)`**: 记录一般信息。
-   **`SpaceLog.warning(message: Representamen)`**: 记录警告信息。
-   **`SpaceLog.error(message: Representamen)`**: 记录错误信息。
-   **`SpaceLog.critical(message: Representamen)`**: 记录严重错误信息。

每个函数都接受一个 `Representamen` 类型的参数，表示要记录的日志信息。

#### 日志等级

SpaceLog 的日志等级从低到高依次为：DEBUG、INFO、WARNING、ERROR、CRITICAL。默认的日志等级为 INFO，这意味着只有 INFO 及以上级别的日志信息会被记录。

可以通过设置 `Config.SpaceLog.level` 来修改日志等级，例如：

```npl
Config.SpaceLog.level = "DEBUG"  # 记录所有级别的日志信息
Config.SpaceLog.level = "WARNING"  # 只记录 ERROR 和 WARNING 级别的日志信息
```

**示例：**

```npl
SpaceLog.debug("这是一条调试信息。")
SpaceLog.info("这是一条一般信息。")
SpaceLog.warning("这是一条警告信息。")
SpaceLog.error("这是一条错误信息。")
```

**输出：**

SpaceLog 的日志信息会直接输出到 Space 中，并作为 Space 的一部分进行共享和传递。

#### **与 Cognitive Trace 的区别**  

| 维度          | **Cognitive Trace (CT)**               | **SpaceLog**                 |  
|---------------|----------------------------------------|------------------------------|  
| **目的**      | 记录认知实体的行为语义                  | 记录程序运行状态与诊断信息    |  
| **控制权**    | 由 `Cognitor` 自主创建                  | 由开发者手动触发              |  
| **内容性质**  | 类型化行为描述（无等级）                | 等级化日志（DEBUG/INFO 等）   |  


## 4. 内置语法与操作

### 4.1. 索引

-   **语法**: 使用点 (`.`) 访问对象属性或方法。这些是结构化的 `Representamen`，提供了访问内部状态或应用特定约束 (`Constraint`) 的接口。在集合或概念空间中，可使用 `*` 作为通配符进行筛选（这是一种模式 `Representamen` 作为 `Constraint`）。
-   **示例**: `苹果.*.颜色.eq(绿色).品种.名称` (这段 NPL `Representamen` 包含多个约束：类型是苹果，颜色是绿色，要获取的是品种名称，应用这些约束于知识库 `Referent` 来获取结果 `Representamen`)。
-   **上下文**: 筛选通常基于常识或当前 `Space` 的内容（一系列 `Representamen` 约束）。

### 4.2 自然语言处理

自然语言可以被作为 NPL 对象处理。

### 4.3 注释

使用 `#`，`//` 和 `/**/` 进行注释。其它编程语言常见的注释也可被识别（如 `--` ）。

注释的内容将被作为 `Referent(怎么处理该NPL指令)` 的约束。也就是说，它可以影响 `Cognitor` 处理 `NPL` 的方式。


## 5. 内置对象与变量

### 5.1. `Doc`
- **作用**: 一个指向当前所有 ACP 文档 (`Representamen` 集合) 的对象句柄 (`Representamen`)。
- **方法**:
	* `Doc["NPL 参考库"]` (`Representamen` 索引) 将会指向当前的参考库文档 (`Representamen`)。
	* `Doc.search("参考库")` (搜索 `Representamen` 作为 `Constraint`) 将会被自动推测其意图 (`Referent` 管理)，最终也可能指向当前的参考库文档 (`Representamen`)。

### 5.2. `Config`

-   **作用**: 一个指向当前 `Space` 配置选项 (`Representamen`) 的对象句柄。修改其属性会**立刻生效**（改变约束条件）。
-   **主要属性 (部分)**:
    -   `Config.autodef`: 是否在需要时自动调用 `Auto.autodef` 的约束。默认为 `True`。
    -   `Config.autofill`: 是否在需要时自动调用 `Auto.autofill` 的约束。默认为 `True`。
    -   `Config.auto`: 是否在需要时自动调用 `Auto.auto` 的约束。默认为 `True`。
    -   `Config.语法严格性`: NPL `Representamen` 解析的严格程度约束 (`"high"`, `"low"`). 默认为 `"low"`。
    -   `Config.自动输入检测`: 是否自动解析 `<In>...</In>` 结构 (`Representamen`) 的约束。默认为 `True`。
    -   `Config.uncertainty.max_nesting_depth`: `Referent.to_yaml()` (`Representamen` 输出) 默认的最大递归显示层数约束。默认为 `1`。
    -   `Config.安全等级`: 当前安全等级约束。默认为`high`以避免在工作场合出现不适宜内容。需要使用`force`修改。
    -   `Config.arena_format`: `Space` 交互环境格式 (`Representamen`) 的约束。当前可选 `"Canvas"`, `"Tracer"` 等。默认为 `"Canvas"`。
    -    `Config.SpaceLog.level`: `SpaceLog` 的日志等级。
    -    `Config.default_chat_to`: 全局 chat 命令的默认对象。

-   **方法**:
    -   `Config.to_yaml()`: 以 YAML 格式 (`Representamen`) 输出当前所有配置项（约束）。


### 5.3. `cts`

`Dict[Cognitor.name, List[CT]]`

- **作用**: 一个指向当前所有 认知轨迹 (`Representamen` 集合) 的对象句柄 (`Representamen`)。

### 5.4. `cognitors`

`Set[Cognitor]`

- **作用**: 一个存放当前所有参与 `Space` 的 `Cognitor` 的集合。

### 5.5 `operator`

- **作用**: 全局变量，与 `Space.operator` 效果相同。

### 5.6 `author`

- **作用**: 占位符，