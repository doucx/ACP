# NPL 内置“类”与概念：认知指令模式的操作句柄 v2.0

**重要前提**: 本文档描述的“类”（如 `Datum`, `Quote`, `CognitorRef`）在 NPL 中**不是**传统面向对象编程意义上的类或运行时对象。它们是 NPL **语法层面**的概念，主要体现为 **`Datum` 句柄**，用于在 NPL 认知指令 (`CD`) 的 `Representamen` 中方便地引用其他 `Sign` 或概念 (`Object`)。对这些句柄应用的点操作符（`.`）及其后的“方法名”构成了一种**结构化的认知指令模式 (`CD` Pattern)**，用于指导 `Cognitor` 对所引用的 `Object` 执行特定的内部符号处理。

## 1. `Datum` 句柄: NPL 中引用 `Sign`/`Object` 的机制

* **概念**: `Datum` 句柄（如 NPL 中的变量名 `my_variable`）是 NPL `Representamen` 的一部分，它充当一个**占位符或标签**。当 `Cognitor` 解释包含此句柄的 NPL `Sign` 时，它需要将这个句柄**解析**为其所指向的**目标 `Sign` 或概念 (`Object`)**。这个目标 `Object` 才是 NPL 指令真正要操作或讨论的对象。
* **目的**: 提供一种在 NPL 指令的文本 (`Representamen`) 中，一致地引用和传递对其他 `Sign` 或内部追踪概念 (`Object`) 的引用的方式。
* **创建与来源**: `Datum` 句柄通常通过 NPL 赋值指令（`handle = source`）在 `Cognitor` 的内部符号过程中建立起与某个 `Object` 的关联。`source` 本身可以是字面量 `Sign`、另一个 `Datum` 句柄、或返回 `Datum` 句柄的 `CD` 模式的结果。

### 核心认知指令模式 (应用于 `Datum` 句柄的 NPL "方法")

对 `Datum` 句柄应用“方法”是在 NPL 中对 `Cognitor` 发出关于如何处理该句柄所指向的 `Object` 的结构化**认知指令 (`CD`)**。这些模式利用了编程的隐喻。

* **`a_datum_handle.explore_meaning(depth: Datum = ..., constraints: Datum = ...)`**:
    * **CD 意图 (`Object`)**: 指导 `Cognitor` 对 `a_datum_handle` 指向的 `Object` 进行深入的**无限衍义 (Unlimited Semiosis)** 探索。
    * **认知过程指导**: 请求 `Cognitor` 以目标 `Object` 为起点，在可选的 `depth` 限制内，应用 `constraints` (作为额外**约束 `Constraint`**) 及上下文，迭代生成 `Interpretant` 链，探索其潜在意义。
    * **CT 要求**: **必须**通过 `CT Sign` 记录探索过程的关键路径、应用的关键 `Constraint`、以及得出的主要潜在 `Interpretant`。
    * **返回值 (概念性)**: 此 `CD` 通常不直接返回值，其效果体现在生成的 `CT Sign` 流中，或可能返回一个指向包含探索摘要的新 `Sign` 的 `Datum` 句柄。

* **`a_datum_handle.resolve(constraints: Datum = ...)`**:
    * **CD 意图 (`Object`)**: 指导 `Cognitor` 尝试**降低** `a_datum_handle` 指向的 `Object` 的**不确定性**。
    * **认知过程指导**: 请求 `Cognitor` 聚焦目标 `Object`，应用 `constraints` 和上下文作为**约束**，利用**推理**能力，尝试将其转化为一个意义更明确的 `Sign` 或状态。
    * **CT 要求**: `CT Sign` 需记录应用的 `Constraint` 及推理过程。
    * **返回值 (概念性)**: 返回一个 `Datum` 句柄，指向这个经过“解析”后、理论上更明确的 `Sign`。

* **`a_datum_handle.alternatives(num: Datum = 1, constraints: Datum = ...)`**:
    * **CD 意图 (`Object`)**: 指导 `Cognitor` 从 `a_datum_handle` 指向的 `Object` 的多种潜在解释中，提取出指定数量 (`num`) 的代表性 `Interpretant`。
    * **认知过程指导**: 请求 `Cognitor` 评估目标 `Object` 在当前 `Constraint` 下的意义空间，挑选出几个具体的 `Interpretant` 或对应的 `Sign`。
    * **CT 要求**: `CT Sign` 需记录选择过程和依据。
    * **返回值 (概念性)**: 返回一个包含多个 `Datum` 句柄的列表 `Datum`，每个句柄指向一种具体的解读 `Sign`。

* **`a_datum_handle.get_representamen_text()`**:
    * **CD 意图 (`Object`)**: 指导 `Cognitor` 提供 `a_datum_handle` 指向的目标 `Sign` 的**外显再现体 (`Externalized Representamen`)** 的文本形式。
    * **认知过程指导**: 请求 `Cognitor` 访问目标 `Sign`，并将其 `Representamen` 以文本形式外显化。
    * **返回值 (概念性)**: 返回一个包含原始文本的 `Datum` 句柄 (指向一个简单文本 `Sign`)。

* **`a_datum_handle.apply_cd_pattern(pattern: Datum, ...)`**:
    * **CD 意图 (`Object`)**: 指导 `Cognitor` 将 `pattern` (另一个 `Datum`，其指向一个 NPL 认知指令模式的 `Sign`) 应用于 `a_datum_handle` 指向的 `Object`。这是实现高阶指令的基础。
    * **认知过程指导**: 请求 `Cognitor` 理解 `pattern` `Sign` 的指导意图，并将当前 `Object` 作为该指导的主要处理对象，然后遵循 `pattern` 的指导进行后续符号过程。
    * **CT 要求**: 详细记录如何应用 `pattern` 及后续处理。
    * **返回值 (概念性)**: 返回应用指令模式后产生的新 `Sign` 的 `Datum` 句柄。

* **`a_datum_handle.add_constraint(constraint: Datum)`**:
    * **CD 意图 (`Object`)**: 指导 `Cognitor` 在其后续处理 `a_datum_handle` 指向的 `Object` 时，显式地将 `constraint` `Datum` 指向的 `Sign` 作为一个额外的**约束 (`Constraint`)**。
    * **认知过程指导**: 请求 `Cognitor` 在后续的符号过程中，必须将此 `constraint Sign` 纳入考虑范围。
    * **CT 要求**: `CT Sign` 记录添加了此约束。
    * **返回值 (概念性)**: 通常不返回值或返回自身。

## 2. `Quote` 句柄: 指向 `Space` 中特定历史 `Sign` 的 Datum

* **概念**: `Quote` 是一种**特殊类型的 `Datum` 句柄**。当 `Cognitor` 解释包含 `Quote` 句柄的 NPL `Sign` 时，该句柄指导 `Cognitor` 定位到 `Space` 中某个**已经存在的、具体的历史外显符号 (`Externalized Sign`)**。它充当一个精确的引用。
* **目的**: 避免信息冗余，确保对历史 `Sign` 的精确指代。
* **标识信息 (概念性)**: NPL `Representamen` 中表示 `Quote` 的部分需要包含足够信息（如 `origin` 和 `seq`，或 Canvas 中的 `node_id` 格式）让 `Cognitor` 能唯一地定位到被引用的历史 `Sign`。例如 NPL 语法 `cts["Gemini"][0]` 中的 `"Gemini"[0]` 部分。
* **处理方式**: `Cognitor` 解析 `Quote` 句柄，找到被引用的历史 `Sign`，然后在当前符号过程中使用该历史 `Sign` 作为操作对象或约束。

## 3. `CognitorRef` 句柄: 指向认知实体的 Datum

* **概念**: `CognitorRef` 是另一种**特殊类型的 `Datum` 句柄**，用于在 NPL `CD` 的 `Representamen` 中引用某个**认知实体 (`Cognitor`)**。
* **目的**: 明确认知活动的主体或对象（如 `chat` 的目标，`exec` 的执行者）。
* **标识信息**: 通常包含 `Cognitor` 的唯一名称或标识符。
* **关联 CD 模式 (概念性)**:
    * **`a_cognitor_ref.get_info()`**: 指导 `Cognitor` 查询并返回目标 `Cognitor` 的 `CognitorInfo Sign` 的 `Datum` 句柄。

## 总结

NPL 中的“类”概念被重新定义为**基于 `Datum` 句柄的认知指令模式**。`Datum` 句柄是 NPL 语法中引用其他 `Sign` 或概念 (`Object`) 的机制。对 `Datum` 句柄应用的点操作符和方法名构成了结构化的认知指令 (`CD`)，指导 `Cognitor` 对目标 `Object` 执行特定的内部符号过程。`Quote` 和 `CognitorRef` 是用于引用历史 `Sign` 和 `Cognitor` 实体的特殊 `Datum` 句柄。