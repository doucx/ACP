# 核心 NPL 认知指令模式 (`CD` Patterns)

本文档定义了 NPL 核心提供的、不依赖特定库（如 `canvas`）的**标准化认知指令模式 (`CD Patterns`)**。这些模式通过特定的 NPL `Sign` 结构被识别。

*(注：原 `print`, `input`, `exec`, `force` 中与特定实现（如 Canvas 的 stdout/stdin, 或跨 Cognitor 委托）紧密相关的部分，现移至相应库（如 `canvas` 库或新的核心交互库）的定义中。这里保留更通用的核心模式。)*

## 1. `NPL.feedback(feedback_sign: Datum, target: CognitorRef = operator)` (`CD` Pattern)

* **NPL `Sign` 结构**: `NPL.feedback(...)` 或直接 `feedback(...)` (如果核心模式默认可用)
* **意图 (`Object`)**: 向 `target` `Cognitor` 提供元认知层面的反馈信息 `Sign` (`feedback_sign`)。
* **认知过程指导**:
    1.  (`operator` 运行时) 将 `feedback_sign` 传递给 `target` `Cognitor` (可能涉及跨运行时通信)。
    2.  (`target` 运行时) 感知并内化 `feedback_sign`，将其作为 `Constraint` 调整自身策略。
    3.  `target` **必须**在 `CT` 中记录收到反馈。

## 2. `NPL.naturalize(npl_sign: Datum)` (`CD` Pattern)

* **NPL `Sign` 结构**: `NPL.naturalize(npl_sign)`
* **意图 (`Object`)**: 指导 `Cognitor` 在其 NPL 运行时中，将结构化的 NPL `Sign` (`npl_sign`) **重新表述**为自然语言 `Sign`。
* **认知过程指导**: `Cognitor` 运用其语言转换能力进行表述。
* **返回值 (概念性)**: 返回包含自然语言 `Sign` 的 `Datum` 句柄。

## 3. `NPL.nplize(natural_sign: Datum)` (`CD` Pattern)

* **NPL `Sign` 结构**: `NPL.nplize(natural_sign)`
* **意图 (`Object`)**: 指导 `Cognitor` 在其 NPL 运行时中，理解自然语言 `Sign` (`natural_sign`) 的意图，并尝试将其**结构化**为等效的 NPL `Sign`。
* **认知过程指导**: `Cognitor` 运用其理解和 NPL 结构生成能力。
* **返回值 (概念性)**: 返回包含生成的 NPL `Sign` 的 `Datum` 句柄。

## 4. `NPL.RequestRuntimeInput(prompt: Datum = "", target: CognitorRef = origin)` (`CD` Pattern, 新增/替代 `input`)

* **NPL `Sign` 结构**: `NPL.RequestRuntimeInput(...)`
* **意图 (`Object`)**: 指导 `operator` 的 NPL 运行时暂停，并向 `target` `Cognitor` 请求输入，以供运行时后续使用。这是**核心 NPL 层面**的输入请求，具体实现（如是否创建 Canvas `InteractionRequestNode`）由 `operator` 根据当前 `Space` 实现决定。
* **认知过程指导**:
    1.  (`operator` 运行时) 解析指令，识别需要向 `target` 请求输入。
    2.  `operator` `Cognitor` 根据当前 `Space` 实现（如 Canvas）生成必要的请求 `Sign`（如 `InteractionRequestNode`）并发送。记录 `CT`。
    3.  `operator` 的 NPL 运行时**暂停**等待。
    4.  ... (等待 `target` 响应，响应 `Sign` 到达 `Space`) ...
    5.  `operator` 感知响应 `Sign`，其 NPL 运行时**恢复**，并将响应 `Sign` 与此指令关联。
* **返回值 (概念性)**: 逻辑上关联到响应 `Sign` 的 `Datum` 句柄。

## 5. `NPL.ExecuteDirective(instruction_sign: Datum, executor: CognitorRef)` (`CD` Pattern, 替代 `exec`)

* **NPL `Sign` 结构**: `NPL.ExecuteDirective(...)`
* **意图 (`Object`)**: 指导 `operator` 将 `instruction_sign` (一个 `CD Sign`) 发送给 `executor` `Cognitor`，请求其**在其自身的 NPL 运行时中处理**该指令。
* **认知过程指导 (跨运行时)**:
    1.  (`operator` 运行时) 解析指令，理解委托意图。
    2.  `operator` `Cognitor` 将 `instruction_sign` 发送给 `executor`。记录 `CT`。
    3.  `operator` 运行时通常暂停等待（或按需异步）。
    4.  (`executor` 运行时) 接收 `instruction_sign` 并处理。记录其 `CT`。
    5.  `executor` 可将结果 `Sign` 发回。
    6.  `operator` 运行时接收结果并继续。
* **注意**: `force` 的概念可以通过向 `instruction_sign` 或委托请求中添加特定的 `Constraint` (如 `priority="override"`) 来实现，由 `executor` 在其运行时中解释和处理，而非单独的 `force` 指令。